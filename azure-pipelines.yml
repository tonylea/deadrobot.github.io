# Node.js with React
# Build a Node.js application that uses React.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/vsts/pipelines/languages/javascript

pool:
  vmImage: "Ubuntu 16.04"

steps:
  - task: NodeTool@0
    inputs:
      versionSpec: "8.x"
    displayName: "Install Node.js"
  - task: DownloadSecureFile@1
    inputs:
      secureFile: id_rsa

  - script: |
      mkdir ~/.ssh
      cp $env:DOWNLOADSECUREFILE1_SECUREFILEPATH ~/.ssh/
      npm install
      npm run build
      npm run test
      npm run deploy
    displayName: "npm install, build, test and deploy"
